# 4\. AI开发工作流与交付标准

## 4.1. 强制性TDD工作流 (Mandatory TDD Workflow)

AI开发智能体在执行任何编码任务时，必须严格遵循以下步骤：

1.  **创建失败测试**: 在编写功能代码前，先在`tests/`目录下编写一个会失败的测试用例。
2.  **编写最小实现**: 在`src/`目录下编写最少量的、仅足以让测试通过的代码。
3.  **确认测试通过**: 再次运行测试，确保其成功通过。
4.  **代码重构与文档**: 在测试的保护下，对代码进行重构，提升代码质量和可读性。

## 4.2. 完成的定义 (Definition of Done)

一个开发故事被视为“完成”，必须满足以下所有条件：

  * 所有相关的功能代码和测试代码已提交到代码库。
  * 所有在故事文件中定义的测试必须在CI流程中**100%通过**。
  * AI开发智能体必须在故事文件的`Dev Agent Record`部分填写其**完成笔记**。
  * 代码必须通过代码格式化工具（如`ruff format`）的检查。
